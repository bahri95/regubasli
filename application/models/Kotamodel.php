<?php         if (!defined('BASEPATH')) exit('No direct script access allowed');    class Kotamodel extends CI_Model {                function  __construct() {            // Call the Model constructor            parent::__construct();        }                function get_all_propinsi() {            $sql = "SELECT * FROM provinsi";            $query = $this->db->query($sql);                        if ($query->num_rows() > 0) {                $result = $query->result_array();                $query->free_result();                return $result;            } else {                return false;            }        }                function is_exists_kota($kota) {            $id = $this->input->post('id_propinsi');            $sql = "SELECT COUNT(*)'total' FROM kota WHERE LOWER(nama) = ?  and id = $id";            $query = $this->db->query($sql, array($kota));            $result = $query->row_array();            $query->free_result();                        if (isset($result['total']) AND !empty($result['total'])) {                return true;            } else {                return false;            }        }                function get_max_kode_kota() {            $sql = "SELECT (MAX(id)+1)'max_id' FROM kota";            $query = $this->db->query($sql);                        if ($query->num_rows() > 0) {                $result = $query->result_array();                $query->free_result();                return $result;            } else {                return false;            }        }                function get_total_kota($id = '') {            $params = array($id);                        if(!empty($id))            $sql = "SELECT COUNT(*)'total' FROM kota WHERE id = ?"; else            $sql = "SELECT COUNT(*)'total' FROM kota";            $query = $this->db->query($sql, $params);                        if ($query->num_rows() > 0) {                $result = $query->row_array();                $return = $result["total"];                $query->free_result();                return $return;            } else {                return 0;            }        }                function get_all_kota() {            $sql = "SELECT COUNT(*)'total' FROM kota";            $query = $this->db->query($sql);                        if ($query->num_rows() > 0) {                $result = $query->result_array();                $query->free_result();                return $result;            } else {                return false;            }        }                function get_data_kota($id = '', $limit) {                        if(!empty($id)) {                $params  = array_merge(array($id), $limit);                $sql = "SELECT a.*, c.nama as nama_prov FROM kota a                    INNER JOIN provinsi c ON a.id_prov = c.id                    WHERE c.id = ?                    ORDER BY a.nama ASC LIMIT ?, ?";            } else {                $params  = $limit;                $sql = "SELECT a.*, c.nama as nama_prov FROM kota a                    INNER JOIN provinsi c ON a.id_prov = c.id                                        ORDER BY a.nama ASC LIMIT ?, ?";            }            $query = $this->db->query($sql, $params);                        if ($query->num_rows() > 0) {                $result = $query->result_array();                $query->free_result();                return $result;            } else {                return false;            }        }                function get_data_kota_all($id = '') {                        if(!empty($id)) {                $params  = array_merge(array($id));                $sql = "SELECT a.*, c.nama as nama_prov FROM kota a                    INNER JOIN provinsi c ON a.id_prov = c.id                    WHERE c.id = ?                    ORDER BY a.nama  ASC ";                $query = $this->db->query($sql, $params);            } else {                $sql = "SELECT a.* , c.nama as nama_prov FROM kota a                    INNER JOIN provinsi c ON a.id_prov = c.id                    ORDER BY a.nama ASC ";                $query = $this->db->query($sql);            }                        if ($query->num_rows() > 0) {                $result = $query->result_array();                $query->free_result();                return $result;            } else {                return false;            }        }                function get_kota_by_id($id) {            $query = $this->db->where(array('id' => $id));            $query = $this->db->get('kota');                        if ($query->num_rows() > 0) {                $result = $query->row_array();                $query->free_result();                return $result;            } else {                return false;            }        }                function process_kota_add($params) {            // insert into kota            $sql = "INSERT INTO kota (id, id_prov, nama)                VALUES (?, ?, ?)";            return $this->db->query($sql, $params);        }                function process_kota_edit($params) {            // update into kota            $sql = "UPDATE kota SET id_prov = ?, nama = ?                WHERE id = ?";            return $this->db->query($sql, $params);        }                function process_kota_delete($id) {                        if(!empty($id)) {                foreach($id as $value) {                    $this->db->where('id', $value);                    $this->db->delete('kota');                }            }            return true;        }                function process_kota_delete_one($id) {                        if(!empty($id)) {                $this->db->where('id', $id);                $this->db->delete('kota');            }            return true;        }    }